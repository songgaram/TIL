# cookie & session
HTTP는 상태가 없는(Stateless) 프로토콜이기 때문에 사용자가 특정 웹 사이트에 접속하게 될 경우 어떤 사용자 정보를 파악할 수 없다. 따라서, 쿠키 또는 세션을 사용하여 사용자를 구분하고 각 사용자에 맞는 정보를 제공한다.

## cookie
-  Key-Value 형식
-  웹 브라우저에 저장되는 작은 데이터 조각

### cookie 인증 방식
1. 브라우저(클라이언트)가 서버에 **요청(접속)** 을 보낸다.
2. 서버는 클라이언트의 요청에 대한 **응답**을 작성할 때, 클라이언트 측에 저장하고 싶은 정보를 **응답 헤더**의 ```Set-Cookie```에 담는다.
3. 이후 해당 클라이언트는 요청을 보낼 때마다, 매번 저장된 쿠키를 요청 헤더의 Cookie에 담아 보낸다.
4. 서버는 쿠키에 담긴 정보를 바탕으로 해당 요청의 **클라이언트가 누군지 식별**하거나 정보를 바탕으로 **추천 광고**를 띄우거나 한다.

### 특징
- 서버에 저장해야 할 민감한 정보에 대한 **식별자 ID**
- 사용자 행동 기록 및 분석

### 단점
- 요청 시 쿠키의 값을 그대로 보내기 때문에 보안에 취약
- 용량 제한이 있어 많은 정보를 담을 수 없음
- 쿠키의 사이즈가 커질수록 네트워크에 부하

## session
비밀번호 등 클라이언트의 민감한 인증 정보를 브라우저가 아닌 서버 측에 저장하고 관리.

### session 인증 방식
1. 유저가 웹사이트에서 로그인하면 세션이 **서버 메모리(혹은 데이터베이스)** 상에 저장됨. *이때, Session Id를 기준으로 정보를 저장.
2. 서버에서 Session Id를 헤더로 클라이언트에게 전달.
3. 쿠키에 정보가 담겨있기 때문에 브라우저는 해당 사이트에 대한 모든 Request에 Session Id를 ```Set-Cookie```에 담아 전송.
4. 서버는 클라이언트가 보낸 Session Id 와 서버 메모리로 관리하고 있는 Session Id를 비교하여 인증을 수행.

### 단점
- 세션 ID 자체를 탈취하여 클라이언트인척 위장할 수 있음
- 서버에서 세션 저장소를 사용하므로 요청이 많아지면 서버에 부하

## 둘의 차이점
- 쿠키
  - 클라이언트 쪽에 저장한다. (웹 브라우저)
  - 브라우저가 꺼져도 삭제되지 않고 사용자가 삭제하거나 정해진 시간만큼 유지된다.
  - 문자열만 저장할 수 있다.
  - 클라이언트에서 보내기 때문에 속도가 빠르다.
  - 민감한 데이터를 스니핑 당할수도 있기 때문에 보안에 취약하다.
  
- 세션
  - 서버쪽에 저장한다. (서버의 메모리 혹은 데이터베이스)
  - 브라우저가 꺼질 경우 삭제된다.
  - 문자열 뿐 아니라 객체도 저장할 수 있다.
  - 서버쪽에서 처리하기 때문에 속도가 비교적 느리다.
  - 서버에서 민감한 데이터를 갖고 있기 때문에 비교적 보안이 좋다.
